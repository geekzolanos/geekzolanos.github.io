"use strict";var p_notify=function(){this.prefs={},this.load=function(e){var t=this,n=app.prefs.get("data"),i=e.domNode.querySelector('section[role="region"] > header > button:first-child'),c=e.domNode.querySelector("#audio-enabled"),r=c.querySelector('input[type="checkbox"]'),o=e.domNode.querySelector("#vibration-enabled"),a=o.querySelector('input[type="checkbox"]'),d=e.domNode.querySelector('#vibration-duration input[type="range"]'),s=e.domNode.querySelector("#notify-background"),u=s.querySelector('input[type="checkbox"]');r.checked=n.audio.enabled,a.checked=n.vibration.enabled,d.value=parseInt(n.vibration.duration)/1e3,u.checked=n.notify,i.addEventListener("click",function(){t.close()}),c.addEventListener("click",function(){r.checked=!r.checked}),o.addEventListener("click",function(){a.checked=!a.checked}),r.addEventListener("change",function(){t.prefs.audio||(t.prefs.audio={}),t.prefs.audio.enabled=this.checked}),a.addEventListener("change",function(){t.prefs.vibration||(t.prefs.vibration={}),this.checked?d.disabled=!1:d.disabled=!0,t.prefs.vibration.enabled=this.checked}),d.addEventListener("change",function(){t.prefs.vibration||(t.prefs.vibration={}),t.prefs.vibration.duration=1e3*this.value}),s.addEventListener("click",function(){u.checked=!u.checked}),u.addEventListener("change",function(){t.prefs.notify=this.checked})},this.updatePrefs=function(){var t=this;return new Promise(function(e){app.data.setPrefs(t.prefs).then(e)})},this.close=function(){this.updatePrefs().then(function(){am.startActivity(am.catalog.get("preferences","p_main"),{animation:["left-current","current-right"]})})}};am.constructors.p_notify=p_notify;