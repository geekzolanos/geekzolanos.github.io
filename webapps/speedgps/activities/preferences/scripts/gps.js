"use strict";var p_gps=function(){this.prefs={},this.load=function(e){var t=this,n=app.prefs.get("wp_prefs"),i=e.domNode.querySelector('section[role="region"] > header > button:first-child'),r=e.domNode.querySelector("#main ul #timeout select"),s=e.domNode.querySelector("#main ul #maximumAge select");r.selectedIndex=r.querySelector('option[value="'+n.timeout.toString()+'"]').index,this.updateFakeSel(r),s.selectedIndex=s.querySelector('option[value="'+n.maximumAge.toString()+'"]').index,this.updateFakeSel(s),r.addEventListener("change",function(){t.updateFakeSel(this),t.prefs.timeout=parseInt(this.value)}),s.addEventListener("change",function(){t.updateFakeSel(this),t.prefs.maximumAge=parseInt(this.value)}),i.addEventListener("click",function(){t.close()})},this.updateFakeSel=function(e){e.parentNode.querySelector("fieldset > legend").innerHTML=e.selectedOptions[0].innerHTML},this.updatePrefs=function(){var t=this;return new Promise(function(e){app.wp.setPrefs(t.prefs).then(e)})},this.close=function(){this.updatePrefs().then(function(){am.startActivity(am.catalog.get("preferences","p_main"),{animation:["left-current","current-right"]})})}};am.constructors.p_gps=p_gps;